(self.webpackChunk_siteed_design_system=self.webpackChunk_siteed_design_system||[]).push([[888],{"./src/components/SelectItems/SelectItems.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.SelectItems=void 0;var _toConsumableArray2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),_slicedToArray2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/slicedToArray.js")),_react=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./node_modules/react/index.js")),_reactI18next=__webpack_require__("./node_modules/react-i18next/dist/es/index.js"),_FlatList=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/FlatList/index.js")),_Platform=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/Platform/index.js")),_StyleSheet=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/StyleSheet/index.js")),_View=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js")),_reactNativePaper=__webpack_require__("./node_modules/react-native-paper/lib/module/index.js"),_useScreenWidth=__webpack_require__("./src/hooks/useScreenWidth.tsx"),_ThemeProvider=__webpack_require__("./src/providers/ThemeProvider.tsx"),_logger=__webpack_require__("./src/utils/logger.ts"),_SelectButtons=__webpack_require__("./src/components/SelectButtons/SelectButtons.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}var logger=_logger.baseLogger.extend("SelectItems");(exports.SelectItems=function SelectItems(_ref){var options=_ref.options,_ref$min=_ref.min,min=void 0===_ref$min?0:_ref$min,max=_ref.max,cols=_ref.cols,renderItem=_ref.renderItem,_ref$multiSelect=_ref.multiSelect,multiSelect=void 0!==_ref$multiSelect&&_ref$multiSelect,_ref$showFooter=_ref.showFooter,showFooter=void 0===_ref$showFooter||_ref$showFooter,showSearch=_ref.showSearch,onFinish=_ref.onFinish,onChange=_ref.onChange,theme=(0,_ThemeProvider.useTheme)(),styles=(0,_react.useMemo)((function(){return function getStyles(theme){return _StyleSheet.default.create({container:{display:"flex",flexDirection:"column",flexGrow:1,flexShrink:1,backgroundColor:theme.colors.surface},footer:{borderTopWidth:2,borderTopColor:theme.colors.outline,marginBottom:20,display:"flex",flexDirection:"row",justifyContent:"space-around",padding:10},finishButton:{},cancelButton:{}})}(theme)}),[theme]),_useState=(0,_react.useState)(""),_useState2=(0,_slicedToArray2.default)(_useState,2),searchQuery=_useState2[0],setSearchQuery=_useState2[1],_useState3=(0,_react.useState)(options),_useState4=(0,_slicedToArray2.default)(_useState3,2),currentOptions=_useState4[0],setCurrentOptions=_useState4[1],refInit=(0,_react.useRef)(null),t=(0,_reactI18next.useTranslation)("select_items").t;null===refInit.current&&(refInit.current=options.map((function(option,index){return{index,selected:!!option.selected}})));var screenWidth=(0,_useScreenWidth.useScreenWidth)(),numColumns=(0,_react.useMemo)((function(){return cols||(screenWidth>=_SelectButtons.BREAKPOINTS.LG?4:screenWidth>=_SelectButtons.BREAKPOINTS.MD?3:screenWidth>=_SelectButtons.BREAKPOINTS.SM?2:1)}),[screenWidth,cols]),filteredOptions=(0,_react.useMemo)((function(){return currentOptions.filter((function(option){return option.label.toLowerCase().includes(searchQuery.toLowerCase())})).sort((function(a,b){return(a.order||1)-(b.order||1)}))}),[currentOptions,searchQuery]),handleSearchChange=(0,_react.useCallback)((function(query){return setSearchQuery(query)}),[]),handleItemChange=(0,_react.useCallback)((function(_ref2){var index=_ref2.index,newOptions=(0,_toConsumableArray2.default)(currentOptions),optionIndex=currentOptions.findIndex((function(option){return option===filteredOptions[index]})),option=newOptions[optionIndex];void 0!==option&&(option.selected=!option.selected,multiSelect||(newOptions=newOptions.map((function(opt,idx){return Object.assign({},opt,{selected:idx===optionIndex&&option.selected})})))),setCurrentOptions(newOptions),logger.log("newOptions",newOptions),null==onChange||onChange(newOptions)}),[currentOptions,filteredOptions,multiSelect,onChange,logger]),selectedOptionsCount=(0,_react.useMemo)((function(){return currentOptions.filter((function(option){return option.selected})).length}),[currentOptions]),isErrorVisible=(0,_react.useMemo)((function(){return selectedOptionsCount<min||max&&selectedOptionsCount>max}),[selectedOptionsCount,min,max]),errorText=(0,_react.useMemo)((function(){return selectedOptionsCount<min?t("min_error",{count:min}):max&&selectedOptionsCount>max?t("max_error",{count:max}):""}),[selectedOptionsCount,min,max,t]),handleRender=(0,_react.useCallback)((function(_ref3){var item=_ref3.item,index=_ref3.index;return(0,_jsxRuntime.jsx)(_jsxRuntime.Fragment,{children:renderItem({item,index,onChange:handleItemChange})})}),[renderItem,handleItemChange]),handleKeyPress=(0,_react.useCallback)((function(event){"web"===_Platform.default.OS&&("Escape"===event.code&&setSearchQuery(""))}),[]),handleCancel=(0,_react.useCallback)((function(){var _refInit$current,newOptions=(0,_toConsumableArray2.default)(currentOptions);null==(_refInit$current=refInit.current)||_refInit$current.forEach((function(_ref4){var index=_ref4.index,selected=_ref4.selected,option=newOptions[index];option&&(option.selected=selected)})),setCurrentOptions(newOptions),null==onFinish||onFinish(options)}),[onFinish,currentOptions,options,refInit]),handleFinish=(0,_react.useCallback)((function(){refInit.current=null,null==onFinish||onFinish(currentOptions)}),[onFinish,currentOptions,refInit]);return(0,_jsxRuntime.jsxs)(_View.default,{style:styles.container,children:[showSearch&&(0,_jsxRuntime.jsx)(_reactNativePaper.Searchbar,{placeholder:t("search_placeholder"),clearButtonMode:"while-editing",onChangeText:handleSearchChange,onKeyPress:handleKeyPress,value:searchQuery}),(0,_jsxRuntime.jsx)(_reactNativePaper.HelperText,{type:"error",visible:isErrorVisible||!1,children:errorText}),(0,_jsxRuntime.jsx)(_FlatList.default,{data:filteredOptions,renderItem:handleRender,keyExtractor:function keyExtractor(_item,index){return`opt${index}`},numColumns},`flatlist-${numColumns}`),showFooter&&(0,_jsxRuntime.jsxs)(_View.default,{style:styles.footer,children:[(0,_jsxRuntime.jsx)(_reactNativePaper.Button,{style:styles.cancelButton,onPress:handleCancel,children:t("cancel")}),(0,_jsxRuntime.jsx)(_reactNativePaper.Button,{style:styles.finishButton,mode:"contained",onPress:handleFinish,children:t("finish")})]})]})}).__docgenInfo={description:"",methods:[],displayName:"SelectItems",props:{multiSelect:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showSearch:{required:!1,tsType:{name:"boolean"},description:""},renderItem:{required:!0,tsType:{name:"signature",type:"function",raw:"({\n  item,\n  index,\n}: {\n  item: SelectItemOption<T>;\n  index: number;\n  onChange?: ({\n    item,\n    index,\n  }: {\n    item: SelectItemOption<T>;\n    index: number;\n  }) => void;\n}) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  item: SelectItemOption<T>;\n  index: number;\n  onChange?: ({\n    item,\n    index,\n  }: {\n    item: SelectItemOption<T>;\n    index: number;\n  }) => void;\n}",signature:{properties:[{key:"item",value:{name:"SelectItemOption",elements:[{name:"T"}],raw:"SelectItemOption<T>",required:!0}},{key:"index",value:{name:"number",required:!0}},{key:"onChange",value:{name:"signature",type:"function",raw:"({\n  item,\n  index,\n}: {\n  item: SelectItemOption<T>;\n  index: number;\n}) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  item: SelectItemOption<T>;\n  index: number;\n}",signature:{properties:[{key:"item",value:{name:"SelectItemOption",elements:[{name:"T"}],raw:"SelectItemOption<T>",required:!0}},{key:"index",value:{name:"number",required:!0}}]}},name:""}],return:{name:"void"}},required:!1}}]}},name:""}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},showFooter:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},min:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},max:{required:!1,tsType:{name:"number"},description:""},cols:{required:!1,tsType:{name:"number"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"SelectItemOption",elements:[{name:"T"}],raw:"SelectItemOption<T>"}],raw:"SelectItemOption<T>[]"},description:""},onFinish:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: SelectItemOption<T>[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"SelectItemOption",elements:[{name:"T"}],raw:"SelectItemOption<T>"}],raw:"SelectItemOption<T>[]"},name:"options"}],return:{name:"void"}}},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: SelectItemOption<T>[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"SelectItemOption",elements:[{name:"T"}],raw:"SelectItemOption<T>"}],raw:"SelectItemOption<T>[]"},name:"options"}],return:{name:"void"}}},description:""}}}}}]);