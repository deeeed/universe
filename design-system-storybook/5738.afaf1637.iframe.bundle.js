(self.webpackChunk_siteed_design_system=self.webpackChunk_siteed_design_system||[]).push([[5738,8911],{"./src/components/RefreshControl/RefreshControl.types.tsx":(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CONSTANTS=void 0;var CONSTANTS=exports.CONSTANTS={maxTranslateY:50,refreshThreshold:15,minVisiblePosition:20,defaultIndicatorSize:24,DEFAULT_PULL_RESET_DELAY:300,MIN_REFRESHING_DURATION:1500};try{CONSTANTS.displayName="CONSTANTS",CONSTANTS.__docgenInfo={description:"Constants used throughout the RefreshControl implementation",displayName:"CONSTANTS",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RefreshControl/RefreshControl.types.tsx#CONSTANTS"]={docgenInfo:CONSTANTS.__docgenInfo,name:"CONSTANTS",path:"src/components/RefreshControl/RefreshControl.types.tsx#CONSTANTS"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/RefreshControl/RefreshControl.web.tsx":(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.RefreshControl=void 0;var _slicedToArray2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/slicedToArray.js")),_objectWithoutProperties2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),_vectorIcons=__webpack_require__("./node_modules/@expo/vector-icons/build/Icons.js"),_react=_interopRequireWildcard(__webpack_require__("./node_modules/react/index.js")),_StyleSheet=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/StyleSheet/index.js")),_View=_interopRequireDefault(__webpack_require__("./node_modules/react-native-web/dist/exports/View/index.js")),_reactNativeGestureHandler=__webpack_require__("./node_modules/react-native-gesture-handler/lib/module/index.js"),_reactNativePaper=__webpack_require__("./node_modules/react-native-paper/lib/module/index.js"),_reactNativeReanimated=_interopRequireWildcard(__webpack_require__("./node_modules/react-native-reanimated/lib/module/index.js")),_ThemeProvider=__webpack_require__("./src/providers/ThemeProvider.tsx"),_RefreshControl=__webpack_require__("./src/components/RefreshControl/RefreshControl.types.tsx"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["PullingIndicator","RefreshingIndicator","onPullStateChange","pullResetDelay","testID","debug"];function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}var DefaultPullingIndicator=function DefaultPullingIndicator(_ref3){var color=_ref3.color,_ref3$size=_ref3.size,size=void 0===_ref3$size?_RefreshControl.CONSTANTS.defaultIndicatorSize:_ref3$size,scale=1+.2*_ref3.progress;return(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:{transform:[{scale}]},children:(0,_jsxRuntime.jsx)(_vectorIcons.Feather,{name:"arrow-down",size,color})})},DefaultRefreshingIndicator=function DefaultRefreshingIndicator(_ref4){var color=_ref4.color,size=_ref4.size;return(0,_jsxRuntime.jsx)(_reactNativePaper.ActivityIndicator,{color,size})},_worklet_12185461930694_init_data={code:"function RefreshControlWebTsx1(newTranslateY){const{isRefreshing,translateY,cursorPositionY,cursorOpacity,CONSTANTS}=this.__closure;if(!isRefreshing.value){translateY.value=newTranslateY;cursorPositionY.value=Math.min(10,newTranslateY);cursorOpacity.value=0.5+newTranslateY/CONSTANTS.maxTranslateY*0.5;}}"},_worklet_9689278125245_init_data={code:"function RefreshControlWebTsx2(){const{debugLog,translateY,CONSTANTS,hasDragged,isPulling,cursorOpacity,withTiming,runOnJS,triggerRefresh,withSpring,setTimeout,notifyPullState,pullResetDelay,isScrolling}=this.__closure;debugLog('Gesture ended',{translateY:Math.round(translateY.value),threshold:CONSTANTS.refreshThreshold,willRefresh:translateY.value>=CONSTANTS.refreshThreshold});hasDragged.value=false;if(isPulling.value){cursorOpacity.value=withTiming(0);if(translateY.value>=CONSTANTS.refreshThreshold){debugLog('Threshold reached, triggering refresh');runOnJS(triggerRefresh)();}else{debugLog('Pull not enough, resetting');translateY.value=withSpring(0);}}setTimeout(function(){runOnJS(notifyPullState)(false);},pullResetDelay);isPulling.value=false;isScrolling.value=false;}"},_worklet_14380262853603_init_data={code:"function RefreshControlWebTsx3(e){const{enabled,isRefreshing,debugLog,hasDragged,isPulling,isScrolling,scrollPosition,runOnJS,notifyPullState,translateY,CONSTANTS,animateValues}=this.__closure;if(!enabled||isRefreshing.value){debugLog('Gesture ignored: already refreshing or disabled');return;}if(!hasDragged.value&&!isPulling.value&&!isScrolling.value&&e.changeY!==0){const downward=e.changeY>0;debugLog('Determining gesture type',{scrollPos:scrollPosition.value,isDownward:downward});if(scrollPosition.value<=0&&downward){isPulling.value=true;isScrolling.value=false;debugLog('Started PULLING');}else{isScrolling.value=true;isPulling.value=false;debugLog('Started SCROLLING');}runOnJS(notifyPullState)(true);hasDragged.value=true;}if(isPulling.value){const newTranslateY=Math.max(0,Math.min(translateY.value+e.changeY,CONSTANTS.maxTranslateY));debugLog('Pulling:',Math.round(newTranslateY),'/',CONSTANTS.maxTranslateY);animateValues(newTranslateY);}}"},_worklet_15827206458064_init_data={code:"function RefreshControlWebTsx4(e){const{debugLog,isRefreshing,isPulling,isScrolling,initialTranslationY}=this.__closure;debugLog('Gesture started');if(!isRefreshing.value){isPulling.value=false;isScrolling.value=false;initialTranslationY.value=e.translationY;}}"},_worklet_11141320892159_init_data={code:"function RefreshControlWebTsx5(){const{translateY}=this.__closure;return{transform:[{translateY:translateY.value}]};}"},_worklet_10431178948922_init_data={code:"function RefreshControlWebTsx6(){const{cursorOpacity,cursorPositionY}=this.__closure;return{opacity:cursorOpacity.value,transform:[{translateY:cursorPositionY.value}]};}"},_worklet_8666775535729_init_data={code:"function RefreshControlWebTsx7(){const{isPulling,translateY,isRefreshing}=this.__closure;return{isPulling:isPulling.value&&translateY.value>5,isRefreshing:isRefreshing.value};}"},_worklet_12163032529718_init_data={code:"function RefreshControlWebTsx8(result){const{runOnJS,setShouldShowIndicator}=this.__closure;const shouldShow=result.isPulling||result.isRefreshing;runOnJS(setShouldShowIndicator)(shouldShow);}"},RefreshControl=exports.RefreshControl=_react.default.forwardRef((function(_ref5,_ref){var _ref5$PullingIndicato=_ref5.PullingIndicator,PullingIndicator=void 0===_ref5$PullingIndicato?DefaultPullingIndicator:_ref5$PullingIndicato,_ref5$RefreshingIndic=_ref5.RefreshingIndicator,RefreshingIndicator=void 0===_ref5$RefreshingIndic?DefaultRefreshingIndicator:_ref5$RefreshingIndic,onPullStateChange=_ref5.onPullStateChange,_ref5$pullResetDelay=_ref5.pullResetDelay,pullResetDelay=void 0===_ref5$pullResetDelay?_RefreshControl.CONSTANTS.DEFAULT_PULL_RESET_DELAY:_ref5$pullResetDelay,testID=_ref5.testID,_ref5$debug=_ref5.debug,debug=void 0!==_ref5$debug&&_ref5$debug,rcProps=(0,_objectWithoutProperties2.default)(_ref5,_excluded),refreshing=rcProps.refreshing,_rcProps$enabled=rcProps.enabled,enabled=void 0===_rcProps$enabled||_rcProps$enabled,progressBackgroundColor=rcProps.progressBackgroundColor,_rcProps$progressView=rcProps.progressViewOffset,_rcProps$size=(void 0===_rcProps$progressView&&_RefreshControl.CONSTANTS.refreshThreshold,rcProps.size),size=void 0===_rcProps$size?_RefreshControl.CONSTANTS.defaultIndicatorSize:_rcProps$size,onRefresh=rcProps.onRefresh,children=rcProps.children,translateY=(0,_reactNativeReanimated.useSharedValue)(0),cursorOpacity=(0,_reactNativeReanimated.useSharedValue)(0),cursorPositionY=(0,_reactNativeReanimated.useSharedValue)(0),theme=(0,_ThemeProvider.useTheme)(),styles=(0,_react.useMemo)((function(){return function getStyles(_ref2){var progressBackgroundColor=_ref2.progressBackgroundColor;return _StyleSheet.default.create({container:{overflow:"visible",flex:1,width:"100%",position:"relative"},content:{},indicatorContainer:{position:"absolute",top:-_RefreshControl.CONSTANTS.maxTranslateY,left:0,right:0,zIndex:1e3,alignItems:"center",justifyContent:"center",height:_RefreshControl.CONSTANTS.maxTranslateY,backgroundColor:progressBackgroundColor,pointerEvents:"none"},cursor:{position:"absolute",left:0,right:0,top:0,alignItems:"center",justifyContent:"center",height:_RefreshControl.CONSTANTS.maxTranslateY,zIndex:99,pointerEvents:"none"}})}({theme,progressBackgroundColor})}),[theme,progressBackgroundColor]),isPulling=(0,_reactNativeReanimated.useSharedValue)(!1),isScrolling=(0,_reactNativeReanimated.useSharedValue)(!1),scrollPosition=(0,_reactNativeReanimated.useSharedValue)(0),initialTranslationY=(0,_reactNativeReanimated.useSharedValue)(0),hasDragged=(0,_reactNativeReanimated.useSharedValue)(!1),isRefreshing=(0,_reactNativeReanimated.useSharedValue)(!1),refreshTimeoutRef=(0,_react.useRef)(null),refreshStartTimeRef=(0,_react.useRef)(null),lastPullPositionRef=(0,_react.useRef)(0),_useState=(0,_react.useState)(!1),_useState2=(0,_slicedToArray2.default)(_useState,2),shouldShowIndicator=_useState2[0],setShouldShowIndicator=_useState2[1],_useState3=(0,_react.useState)(!1),_useState4=(0,_slicedToArray2.default)(_useState3,2),isCurrentlyRefreshing=_useState4[0],setIsCurrentlyRefreshing=_useState4[1],debugLog=(0,_react.useCallback)((function(message){if(debug){for(var _console,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];(_console=console).log.apply(_console,[`[RefreshControl] ${message}`].concat(args))}}),[debug]);(0,_react.useEffect)((function(){if(debugLog("Refreshing prop changed:",refreshing),isRefreshing.value=refreshing,setIsCurrentlyRefreshing(refreshing),refreshing)refreshTimeoutRef.current&&(clearTimeout(refreshTimeoutRef.current),refreshTimeoutRef.current=null),refreshStartTimeRef.current=Date.now(),translateY.value<_RefreshControl.CONSTANTS.minVisiblePosition?(translateY.value=(0,_reactNativeReanimated.withSpring)(_RefreshControl.CONSTANTS.minVisiblePosition),debugLog("Moving indicator to visible position:",_RefreshControl.CONSTANTS.minVisiblePosition)):debugLog("Keeping indicator at current position:",translateY.value);else if(refreshStartTimeRef.current){var elapsedTime=Date.now()-refreshStartTimeRef.current,remainingTime=Math.max(0,_RefreshControl.CONSTANTS.MIN_REFRESHING_DURATION-elapsedTime);debugLog("Refresh ended, elapsed time:",elapsedTime,"remaining:",remainingTime),remainingTime>0?refreshTimeoutRef.current=setTimeout((function(){debugLog("Minimum refresh time reached, hiding indicator"),isRefreshing.value=!1,translateY.value=(0,_reactNativeReanimated.withTiming)(0,{duration:180}),refreshStartTimeRef.current=null,refreshTimeoutRef.current=null}),remainingTime):(isRefreshing.value=!1,translateY.value=(0,_reactNativeReanimated.withTiming)(0,{duration:180}),refreshStartTimeRef.current=null)}}),[refreshing,debugLog]),(0,_react.useEffect)((function(){return function(){refreshTimeoutRef.current&&clearTimeout(refreshTimeoutRef.current)}}),[]);var RefreshControlWebTsx1,RefreshControlWebTsx2,RefreshControlWebTsx3,RefreshControlWebTsx4,RefreshControlWebTsx5,RefreshControlWebTsx6,RefreshControlWebTsx8,RefreshControlWebTsx7,notifyPullState=(0,_react.useCallback)((function(pulling){debugLog("Pull state changed:",pulling),null==onPullStateChange||onPullStateChange(pulling)}),[onPullStateChange,debugLog]),animateValues=((RefreshControlWebTsx1=function RefreshControlWebTsx1(newTranslateY){isRefreshing.value||(translateY.value=newTranslateY,cursorPositionY.value=Math.min(10,newTranslateY),cursorOpacity.value=.5+newTranslateY/_RefreshControl.CONSTANTS.maxTranslateY*.5)}).__closure={isRefreshing,translateY,cursorPositionY,cursorOpacity,CONSTANTS:_RefreshControl.CONSTANTS},RefreshControlWebTsx1.__workletHash=0xb1526213ac6,RefreshControlWebTsx1.__initData=_worklet_12185461930694_init_data,RefreshControlWebTsx1),triggerRefresh=(0,_react.useCallback)((function(){onRefresh&&(debugLog("Calling onRefresh()"),lastPullPositionRef.current=translateY.value,isRefreshing.value=!0,onRefresh())}),[onRefresh,debugLog]),gesture=_reactNativeGestureHandler.Gesture.Pan().onStart((RefreshControlWebTsx4=function RefreshControlWebTsx4(e){debugLog("Gesture started"),isRefreshing.value||(isPulling.value=!1,isScrolling.value=!1,initialTranslationY.value=e.translationY)},RefreshControlWebTsx4.__closure={debugLog,isRefreshing,isPulling,isScrolling,initialTranslationY},RefreshControlWebTsx4.__workletHash=0xe650f04cad0,RefreshControlWebTsx4.__initData=_worklet_15827206458064_init_data,RefreshControlWebTsx4)).onChange((RefreshControlWebTsx3=function RefreshControlWebTsx3(e){if(enabled&&!isRefreshing.value){if(!hasDragged.value&&!isPulling.value&&!isScrolling.value&&0!==e.changeY){var downward=e.changeY>0;debugLog("Determining gesture type",{scrollPos:scrollPosition.value,isDownward:downward}),scrollPosition.value<=0&&downward?(isPulling.value=!0,isScrolling.value=!1,debugLog("Started PULLING")):(isScrolling.value=!0,isPulling.value=!1,debugLog("Started SCROLLING")),(0,_reactNativeReanimated.runOnJS)(notifyPullState)(!0),hasDragged.value=!0}if(isPulling.value){var newTranslateY=Math.max(0,Math.min(translateY.value+e.changeY,_RefreshControl.CONSTANTS.maxTranslateY));debugLog("Pulling:",Math.round(newTranslateY),"/",_RefreshControl.CONSTANTS.maxTranslateY),animateValues(newTranslateY)}}else debugLog("Gesture ignored: already refreshing or disabled")},RefreshControlWebTsx3.__closure={enabled,isRefreshing,debugLog,hasDragged,isPulling,isScrolling,scrollPosition,runOnJS:_reactNativeReanimated.runOnJS,notifyPullState,translateY,CONSTANTS:_RefreshControl.CONSTANTS,animateValues},RefreshControlWebTsx3.__workletHash=0xd142a758be3,RefreshControlWebTsx3.__initData=_worklet_14380262853603_init_data,RefreshControlWebTsx3)).onEnd(((RefreshControlWebTsx2=function RefreshControlWebTsx2(){debugLog("Gesture ended",{translateY:Math.round(translateY.value),threshold:_RefreshControl.CONSTANTS.refreshThreshold,willRefresh:translateY.value>=_RefreshControl.CONSTANTS.refreshThreshold}),hasDragged.value=!1,isPulling.value&&(cursorOpacity.value=(0,_reactNativeReanimated.withTiming)(0),translateY.value>=_RefreshControl.CONSTANTS.refreshThreshold?(debugLog("Threshold reached, triggering refresh"),(0,_reactNativeReanimated.runOnJS)(triggerRefresh)()):(debugLog("Pull not enough, resetting"),translateY.value=(0,_reactNativeReanimated.withSpring)(0))),setTimeout((function(){(0,_reactNativeReanimated.runOnJS)(notifyPullState)(!1)}),pullResetDelay),isPulling.value=!1,isScrolling.value=!1}).__closure={debugLog,translateY,CONSTANTS:_RefreshControl.CONSTANTS,hasDragged,isPulling,cursorOpacity,withTiming:_reactNativeReanimated.withTiming,runOnJS:_reactNativeReanimated.runOnJS,triggerRefresh,withSpring:_reactNativeReanimated.withSpring,setTimeout,notifyPullState,pullResetDelay,isScrolling},RefreshControlWebTsx2.__workletHash=9689278125245,RefreshControlWebTsx2.__initData=_worklet_9689278125245_init_data,RefreshControlWebTsx2)),indicatorContainerStyle=(0,_reactNativeReanimated.useAnimatedStyle)(((RefreshControlWebTsx5=function RefreshControlWebTsx5(){return{transform:[{translateY:translateY.value}]}}).__closure={translateY},RefreshControlWebTsx5.__workletHash=0xa220a795eff,RefreshControlWebTsx5.__initData=_worklet_11141320892159_init_data,RefreshControlWebTsx5)),cursorAnimatedStyle=(0,_reactNativeReanimated.useAnimatedStyle)(((RefreshControlWebTsx6=function RefreshControlWebTsx6(){return{opacity:cursorOpacity.value,transform:[{translateY:cursorPositionY.value}]}}).__closure={cursorOpacity,cursorPositionY},RefreshControlWebTsx6.__workletHash=0x97cb2b7413a,RefreshControlWebTsx6.__initData=_worklet_10431178948922_init_data,RefreshControlWebTsx6));return(0,_reactNativeReanimated.useAnimatedReaction)(((RefreshControlWebTsx7=function RefreshControlWebTsx7(){return{isPulling:isPulling.value&&translateY.value>5,isRefreshing:isRefreshing.value}}).__closure={isPulling,translateY,isRefreshing},RefreshControlWebTsx7.__workletHash=8666775535729,RefreshControlWebTsx7.__initData=_worklet_8666775535729_init_data,RefreshControlWebTsx7),((RefreshControlWebTsx8=function RefreshControlWebTsx8(result){var shouldShow=result.isPulling||result.isRefreshing;(0,_reactNativeReanimated.runOnJS)(setShouldShowIndicator)(shouldShow)}).__closure={runOnJS:_reactNativeReanimated.runOnJS,setShouldShowIndicator},RefreshControlWebTsx8.__workletHash=0xb0fed3bbb36,RefreshControlWebTsx8.__initData=_worklet_12163032529718_init_data,RefreshControlWebTsx8),[]),(0,_jsxRuntime.jsx)(_View.default,{style:styles.container,testID,children:(0,_jsxRuntime.jsx)(_reactNativeGestureHandler.GestureDetector,{gesture,children:(0,_jsxRuntime.jsxs)(_reactNativeReanimated.default.View,{style:styles.content,children:[children,shouldShowIndicator&&(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[styles.indicatorContainer,indicatorContainerStyle],testID:`${testID}-indicator-container`,children:isCurrentlyRefreshing?(0,_jsxRuntime.jsx)(RefreshingIndicator,{color:rcProps.tintColor||theme.colors.primary,size}):(0,_jsxRuntime.jsx)(PullingIndicator,{color:rcProps.tintColor||theme.colors.primary,size,progress:translateY.value/_RefreshControl.CONSTANTS.maxTranslateY})}),(0,_jsxRuntime.jsx)(_reactNativeReanimated.default.View,{style:[styles.cursor,cursorAnimatedStyle],testID:`${testID}-cursor`})]})})})}));RefreshControl.displayName="RefreshControl";try{RefreshControl.displayName="RefreshControl",RefreshControl.__docgenInfo={description:"",displayName:"RefreshControl",props:{PullingIndicator:{defaultValue:{value:'({\n  color,\n  size = CONSTANTS.defaultIndicatorSize,\n  progress,\n}: PullingIndicatorProps) => {\n  const scale = 1 + progress * 0.2;\n  return (\n    <Animated.View style={{ transform: [{ scale }] }}>\n      <Feather name="arrow-down" size={size} color={color as string} />\n    </Animated.View>\n  );\n}'},description:"Custom component to render while pulling to refresh",name:"PullingIndicator",required:!1,type:{name:"FC<PullingIndicatorProps>"}},RefreshingIndicator:{defaultValue:{value:"({\n  color,\n  size,\n}: RefreshingIndicatorProps) => {\n  return <ActivityIndicator color={color as string} size={size} />;\n}"},description:"Custom component to render while refreshing",name:"RefreshingIndicator",required:!1,type:{name:"FC<RefreshingIndicatorProps>"}},onPullStateChange:{defaultValue:null,description:"Callback fired when the pulling state changes",name:"onPullStateChange",required:!1,type:{name:"((isPulling: boolean) => void)"}},pullResetDelay:{defaultValue:{value:"300"},description:"Delay in ms before resetting the pull state",name:"pullResetDelay",required:!1,type:{name:"number"}},testID:{defaultValue:null,description:"Test ID for the component",name:"testID",required:!1,type:{name:"string"}},debug:{defaultValue:{value:"false"},description:"Enable debug logging",name:"debug",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/RefreshControl/RefreshControl.web.tsx#RefreshControl"]={docgenInfo:RefreshControl.__docgenInfo,name:"RefreshControl",path:"src/components/RefreshControl/RefreshControl.web.tsx#RefreshControl"})}catch(__react_docgen_typescript_loader_error){}}}]);